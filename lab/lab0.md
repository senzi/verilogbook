# 实验零 密码开关

这是数字系统设计的第一次实验课，在此之前同学们可能都没有接触过FPGA。
通过这节课希望同学们能够自主的完成一个组合逻辑电路，实现“密码开关”控制蜂鸣器。
然后在Basys2开发板上看到效果实验。

## 一、实验准备
* 基础数字电路知识
* Basys2开发板
* 草稿纸和笔


## 二、马上动手
1. 新建ISE工程
2. 新建.v文件并且敲入以下代码：

    ``` verilog
    module lab0(x1,x2,x3,buzzer);
    
    input	x1,x2,x3;
    output	buzzer;
    
    reg     buzzer;
    always @(x1 or x2 or x3) 
    begin
    	buzzer = ~x3 | (x1 & ~x2);
    end
    
    endmodule
    ```
3. 新建.ucf文件并敲入以下引脚约束:

    ```verilog
    NET "x1" LOC = P11;
    NET "x2" LOC = L3;
    NET "x3" LOC = K3;
    NET "buzzer" LOC = B5;
    ```


## 三、你应该会看到的结果

蜂鸣器是否响起与真值表相对应，试着按照真值表拨动开关检验效果

|行序号|x1|x2|x3|buzzer|
|:---:|:---:|:---:|:---:|:---:|
|0|0|0|0|1|
|1|0|0|1|0|
|2|0|1|0|1|
|3|0|1|1|0|
|4|1|0|0|1|
|5|1|0|1|1|
|6|1|1|0|1|
|7|1|1|1|0|

## 四、挑战升级

当你在开发板上验证完上述代码之后，对verilog的组合逻辑电路应该有了一定了解。
下面将难度提升，同学们制作一个八位的密码开关。
请独立编写符合下面要求的代码，并烧写到basys2上验证效果。
**要求：**
1. 将八个拨码开关全部用上
2. 自己编写一个真值表
3. 只有三个密码能使蜂鸣器响起来

## 五、学习手札

1. 使用always块的时候注意电平敏感的信号列表是否完整。*不能漏掉任何一个组合逻辑中用到的信号*
    ```verilog
    always @(x1 or x2 or x3)
    ```
2. 组合逻辑应使用"阻塞语句"，即使用`a=b;`而不是`a<=b;`。
3. 利用ISE这个软件可以看到综合后的RTL级电路图：

    ![Image Title](/_image/2014-07-14/rtl.png)
    
    ![Image Title](/_image/2014-07-14/lab0_RTL.png)


## 六、常见疑问

1. 问：为什么除了声明`output buzzer;`之外还要声明一次`reg buzzer；`?
    答：reg相当于存储单元，为了让这个变量能在always块中进行赋值然后再输出。
                    
2. 问：如果组合逻辑比较复杂还有什么办法?
    答：可以在always块中使用if语句、case语句使得组合逻辑更加直观，甚至可以使用assign语句(我们课上会讲)



